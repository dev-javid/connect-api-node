{"version":3,"sources":["../../src/controllers/auth.controller.ts"],"sourcesContent":["import { NextFunction, Request, Response } from 'express';\nimport { LoginUserDto } from '@dtos/users.dto';\nimport { RequestWithUser } from '@interfaces/auth.interface';\nimport { User } from '@interfaces/users.interface';\nimport AuthService from '@services/auth.service';\n\nclass AuthController {\n  public authService = new AuthService();\n\n  public signUp = async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const userData: LoginUserDto = req.body;\n      const signUpUserData: User = await this.authService.signup(userData);\n\n      res.status(201).json({ data: signUpUserData, message: 'signup' });\n    } catch (error) {\n      next(error);\n    }\n  };\n\n  public logIn = async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const userData: LoginUserDto = req.body;\n      const { token } = await this.authService.login(userData);\n\n      res.status(200).json({ data: token, message: 'login' });\n    } catch (error) {\n      next(error);\n    }\n  };\n\n  public logOut = async (req: RequestWithUser, res: Response, next: NextFunction) => {\n    try {\n      const userData: User = req.user;\n      const logOutUserData: User = await this.authService.logout(userData);\n\n      res.setHeader('Set-Cookie', ['Authorization=; Max-age=0']);\n      res.status(200).json({ data: logOutUserData, message: 'logout' });\n    } catch (error) {\n      next(error);\n    }\n  };\n}\n\nexport default AuthController;\n"],"names":["AuthController","authService","AuthService","signUp","req","res","next","userData","body","signUpUserData","signup","status","json","data","message","error","logIn","token","login","logOut","user","logOutUserData","logout","setHeader"],"mappings":";;;;+BA4CA;;aAAA;;oDAxCwB;;;;;;AAExB,IAAA,AAAMA,iBAAN,MAAMA;;aACGC,cAAc,IAAIC,oBAAW;aAE7BC,SAAS,OAAOC,KAAcC,KAAeC,OAAuB;YACzE,IAAI;gBACF,MAAMC,WAAyBH,IAAII,IAAI;gBACvC,MAAMC,iBAAuB,MAAM,IAAI,CAACR,WAAW,CAACS,MAAM,CAACH;gBAE3DF,IAAIM,MAAM,CAAC,KAAKC,IAAI,CAAC;oBAAEC,MAAMJ;oBAAgBK,SAAS;gBAAS;YACjE,EAAE,OAAOC,OAAO;gBACdT,KAAKS;YACP;QACF;aAEOC,QAAQ,OAAOZ,KAAcC,KAAeC,OAAuB;YACxE,IAAI;gBACF,MAAMC,WAAyBH,IAAII,IAAI;gBACvC,MAAM,EAAES,MAAK,EAAE,GAAG,MAAM,IAAI,CAAChB,WAAW,CAACiB,KAAK,CAACX;gBAE/CF,IAAIM,MAAM,CAAC,KAAKC,IAAI,CAAC;oBAAEC,MAAMI;oBAAOH,SAAS;gBAAQ;YACvD,EAAE,OAAOC,OAAO;gBACdT,KAAKS;YACP;QACF;aAEOI,SAAS,OAAOf,KAAsBC,KAAeC,OAAuB;YACjF,IAAI;gBACF,MAAMC,WAAiBH,IAAIgB,IAAI;gBAC/B,MAAMC,iBAAuB,MAAM,IAAI,CAACpB,WAAW,CAACqB,MAAM,CAACf;gBAE3DF,IAAIkB,SAAS,CAAC,cAAc;oBAAC;iBAA4B;gBACzDlB,IAAIM,MAAM,CAAC,KAAKC,IAAI,CAAC;oBAAEC,MAAMQ;oBAAgBP,SAAS;gBAAS;YACjE,EAAE,OAAOC,OAAO;gBACdT,KAAKS;YACP;QACF;;AACF;MAEA,WAAef"}